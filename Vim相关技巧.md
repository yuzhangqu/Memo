# 解决中文乱码
编辑~/.vimrc文件:
```
set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936
set termencoding=utf-8
set encoding=utf-8
```

# 指令
- 命令行
    - `-d`：以比较模式打开2-4个文件
    - `-m`：以只读模式打开
- 命令模式
    - `#COMMAND`：执行`#`次命令
    - `w`：下一个单词的词首
    - `e`：当前或下一个单词的词尾
    - `b`：当前或前一个单词的词首
    - `H`：页首
    - `M`：页中
    - `L`：页底
    - `zt`：当前行移到屏幕顶端
    - `zz`：当前行移到屏幕中间
    - `zb`：当前行移到屏幕底端
    - `^`：跳转到非空白行首
    - `0`：跳转到真正的行首
    - `$`：跳转到行尾
    - `#G`：跳到第`#`行
    - `G`：跳到最后一行
    - `gg`：跳到第一行
    - `(/)`：上一句/下一句
    - `{/}`：上一段/下一段
    - `ctrl+u`：向上翻半屏
    - `ctrl+d`：向下翻半屏
    - `ctrl+b`：向上翻一屏
    - `ctrl+f`：向下翻一屏
    - `~`：转换大小写
    - `J`：删除当前行的换行符
    - `D`：删到行尾(等同于`d$`)
    - `cc`：删除当前行并进入插入模式
    - `C`：删除到行尾并进入插入模式
    - `0y$`：从行首拷贝到行尾
    - `ga`：显示字符编码
    - `d或y或vi"或(或[`：删除/复制/选中引号/小括号/中括号中的内容
    - `d或ytx`：删除/复制直到当前行的第一个`x`(不包含`x`)
    - `U`：撤销光标移到这行后的所有更改
    - `ctrl + r`：重做
    - `.`：重复前一个操作
    - `nohl`：取消高亮
    - `>>/<<`：缩进
- Ex模式(按`:`进入)
    - `r FILENAME`：读`FILENAME`文件的内容到当前文件中
    - `w FILENAME`：将当前文件内容写到`FILENAME`文件中
    - `!COMMAND`：执行命令
    - `r!COMMAND`：读入命令的输出
    - `M,NCOMMAND`：从M行到N行执行命令(`M,+N`表示M行到M+N行, `.`表示当前行, `$`表示最后一行, `%`表示全文, 也可用模式匹配到的位置`/PATTERN/`)
    - `/PATTERN`：从光标向尾部查找(`n`与命令同方向找下一个, `N`反方向找下一个)
    - `?PATTERN`：从光标向首部查找
    - `s/查找内容/替换内容/修饰符`：查找替换
        - 查找内容可用基本正则表达式
        - 替换内容可用`\1`(后向引用)和`&`(引用查找到的内容)
        - 修饰符`i`忽略大小写, `g`全局替换, `gc`全局替换每次询问
        - 分隔符`/`可换成其他字符(`@`或`#`)
        - 默认从光标处开始查找, `s`前可加范围(参照前面`M,N`)
- 可视化模式(按`v`面向字符, 按`V`面向整行, `ctrl + v`面向块)
    - 面向块选中多行之后, 按`>`可向后插入4个空格,按`<`可向后删除最多4个空格
    - 选中之后可进行各种操作, 不赘述

# 寄存器
- 有26个命名寄存器(`"a`...`"z`)和1个无命名寄存器, **可**在不同会话共享
- `3"tyy`：复制3行内容到t寄存器(不指定名字时使用无命名寄存器)
- 有10个数字寄存器(`"0`...`"9`), **不可**在不同会话共享
- `"0`存放最近复制的内容, `"1`存放最近删除的内容, 后续删除内容将导致原内容依次向后转存

# 标记
- `ma`：将当前行标记为a(有26个字母可用)
- `'a`：跳转到标记为a的行

# 宏
- `qa`：开始录制宏a
- `q`：停止录制宏
- `@a`：执行宏a
- `@@`：重新执行上次执行的宏

# 编辑二进制文件
- 以二进制方式打开文件：`vim -b FILENAME`
- 转换为可读的十六进制：`:%!xxd`
- 编辑十六进制文件
- 转换为二进制：`:%!xxd -r`

# 多文件操作
- `vim FILE1 FILE2 ...`
    - `:next`：下一个
    - `:prev`：上一个
    - `:first`：第一个
    - `:last`：最后一个
    - `wqall`：全部存盘退出
- `vim -o|-O FILE1 FILE2 ...`
    - `-o`：上下分割
    - `-O`：左右分割
    - `ctrl + w,方向`：光标移到其他窗口(`ctrl + h/j/k/l`可实现)
    - `ctrl + w,s`：上下分割
    - `ctrl + w,v`：左右分割(`:vs`可实现)
    - `ctrl + w,q`：关闭窗口

# 定制vim
- 配置文件：`/etc/vimrc`全局, `~/.vimrc`个人
- `:set nu`：显示行号
- `:set nonu`：隐藏行号
- `:set ic`：启用忽略大小写
- `:set noic`：禁用忽略大小写
- `:set ai`：启用自动缩进
- `:set noai`：禁用自动缩进
- `:set si`：启用智能缩进
- `:set nosi`：禁用智能缩进
- `:set hlsearch`：启用高亮搜索
- `:set nohlsearch`：禁用高亮搜索
- `:syntax on`：启用语法高亮
- `:syntax off`：禁用语法高亮
- `:set list`：启用Tab和换行符显示
- `:set nolist`：禁用Tab和换行符显示
- `:set ff=dos/unix`：设置文件格式为Windows/Unix
- `:set cul`：设置所在行标识线
- `:set nocul`：禁用所在行标识线
- `:set paste`：启用复制时保留格式
- `:set nopaste`：禁用复制时保留格式
- `:set all`：查看所有set配置
- `:help`：内置帮助
- `vimtutor`：帮助程序